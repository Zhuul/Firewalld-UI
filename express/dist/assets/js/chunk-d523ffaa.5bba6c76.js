(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d523ffaa"],{"05e5":function(e,t,i){},"3a4e":function(e,t,i){"use strict";i("05e5")},"74bf":function(e,t,i){"use strict";var s="0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l="~!@#$%^*()_+-=[]{}|;:,./<>?";function c(e,t){e||(e=8),t||(t={});var i="",c="";!0===t?i=s+a+l:"string"==typeof t?i=t:(!1!==t.numbers&&(i+="string"==typeof t.numbers?t.numbers:s),!1!==t.letters&&(i+="string"==typeof t.letters?t.letters:a),t.specials&&(i+="string"==typeof t.specials?t.specials:l));while(e>0)e--,c+=i[Math.floor(Math.random()*i.length)];return c}e.exports=c.default=c},"9a22":function(e,t,i){"use strict";i.r(t);var s,a,l=i("0e92"),c=i("2178"),r=i("8f61"),n=(i("2e53"),i("7f82"),i("d61a"),i("49bc"),i("72e2"),i("ed7c"),i("365c")),o=i("74bf"),d=i.n(o),u=(i("6912"),i("f0a4")),v={render:function(){var e=this,t=arguments[0];return t("div",{directives:[{name:"show",value:this.show}],class:"settings"},[t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["开机"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["开机检测"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.startupTime,callback:function(t){e.$set(e.form,"startupTime",t)}}})]),t("div",["开机多长时间算作刚开机,用于载入数据库黑名单,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["登录"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["登录有效期"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.jwtExpiresIn,callback:function(t){e.$set(e.form,"jwtExpiresIn",t)}}})]),t("div",["登录之后保存登录状态的时长,单位天"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["登录状态验证密钥"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{disabled:!0,size:"small",placeholder:"请生成密钥"},model:{value:e.form.jwtSecret,callback:function(t){e.$set(e.form,"jwtSecret",t)}}},[t("el-button",{slot:"append",on:{click:function(){return e.generateClick("jwtSecret")}}},["生成"])])]),t("div",["加密登录信息"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["防火墙"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["防火墙检测时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.firewalldInterval,callback:function(t){e.$set(e.form,"firewalldInterval",t)}}})]),t("div",["检测需要加入屏蔽名单 IP 的时间,单位分"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["检测访问间隔时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.firewalldDuration,callback:function(t){e.$set(e.form,"firewalldDuration",t)}}})]),t("div",["检测 IP 访问的时间,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["日志"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["日志间隔"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.accessLogInterval,callback:function(t){e.$set(e.form,"accessLogInterval",t)}}})]),t("div",["IP 访问日志间隔时间,屏蔽名单的 IP 不会生成访问日志,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["流量限制"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["接口访问次数"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.ratelimitMax,callback:function(t){e.$set(e.form,"ratelimitMax",t)}}})]),t("div",["接口在单位时间内访问的最大次数"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["接口访问刷新时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.ratelimitDuration,callback:function(t){e.$set(e.form,"ratelimitDuration",t)}}})]),t("div",["重置接口刷新访问次数的时间,单位分"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["验证码"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["验证码有效期"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.captchaExpiresIn,callback:function(t){e.$set(e.form,"captchaExpiresIn",t)}}})]),t("div",["验证码有效时间,单位分"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["验证码密钥"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{disabled:!0,size:"small",placeholder:"请生成密钥"},model:{value:e.form.captchaSecret,callback:function(t){e.$set(e.form,"captchaSecret",t)}}},[t("el-button",{slot:"append",on:{click:function(){return e.generateClick("captchaSecret")}}},["生成"])])]),t("div",["加密验证码信息"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["信任配置"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["部分信任"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"支持 IP 段,多个 IP 换行间隔 示例: \n 192.168.1/255.1 \n 192.168.1.1/255 \n 192.168.1/255.1/255"},model:{value:e.form.believeAccess,callback:function(t){e.$set(e.form,"believeAccess",t)}}})]),t("div",["匹配的 IP 不会被加入黑名单"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["全部信任"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"不支持 IP 段,多个 IP 换行间隔 示例: \n 192. \n 10. \n 解释:以 192. 或者 10. 开头的 IP 都不会被加入黑名单,以此类推"},model:{value:e.form.believeTrust,callback:function(t){e.$set(e.form,"believeTrust",t)}}})]),t("div",["匹配的 IP 不会被加入黑名单,性能好"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["自动清理"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["自动清理"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字",size:"small"},model:{value:e.form.cleanInterval,callback:function(t){e.$set(e.form,"cleanInterval",t)}}})]),t("div",["自动清理日志和整理数据库,单位天"])])])])]),t("div",{class:"s-i-button"},[t("div",{class:"s-i-b-item"},[t("el-input",{attrs:{placeholder:"不区分大小写",clearable:!0},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)}}},[t("div",{slot:"append",on:{click:function(){return e.uuid=d()()}}},[t("global-captcha",{attrs:{uuid:this.uuid},on:{captcha:function(t){return e.captcha=t}}})])])]),t("div",{class:"s-i-b-item"},[t("el-popconfirm",{attrs:{title:"重启后生效,确定吗？"},on:{confirm:function(){return e.setSettings()}}},[t("el-button",{slot:"reference",attrs:{type:"primary"}},["保存"])])]),t("div",{class:"s-i-b-item"},[t("el-popconfirm",{attrs:{title:"将重启确定执行吗？"},on:{confirm:function(){return e.setSettings(!0)}}},[t("el-button",{slot:"reference"},["保存并重启"])])])])])},inject:["triggerLoading"],data:function(){return{show:!1,uuid:d()(),captcha:{svg:"",publicKey:"",captchaSecret:""},form:{code:"",accessLogInterval:"",cleanInterval:"",captchaExpiresIn:"",captchaSecret:"",firewalldDuration:"",firewalldInterval:"",jwtExpiresIn:"",jwtSecret:"",ratelimitDuration:"",ratelimitMax:"",startupTime:"",believeTrust:"",believeAccess:""}}},created:function(){this.getSettings()},methods:Object(r["a"])(Object(r["a"])({},Object(u["c"])(["otherMutationsUserInfo"])),{},{generateClick:function(e){this.form[e]=d()(20)},setSettings:function(){var e=arguments,t=this;return Object(c["a"])(Object(l["a"])().mark((function i(){var s,a,c,o,u,v,m,f;return Object(l["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(c=e.length>0&&void 0!==e[0]&&e[0],""!=t.form.code){i.next=3;break}return i.abrupt("return",t.$message({showClose:!0,message:"请输入验证码",type:"error"}));case 3:return o=null===(s=t.form)||void 0===s?void 0:s.believeTrust,u=null===(a=t.form)||void 0===a?void 0:a.believeAccess,t.triggerLoading(!0),i.next=8,Object(n["u"])(Object(r["a"])(Object(r["a"])({},t.form),{},{codeSecret:t.captcha.captchaSecret,believeAccess:u.split(/\n{1,}/g).filter((function(e){return""!=e})),believeTrust:o.split(/\n{1,}/g).filter((function(e){return""!=e})),restart:c}));case 8:return v=i.sent,m=v.success,f=v.message,v.data,t.triggerLoading(!1),t.uuid=d()(),i.next=16,t.getSettings();case 16:t.$message({showClose:!0,message:m?c?"保存成功,即将重启服务":"保存成功":f,type:m?"success":"error"}),m&&c&&(t.otherMutationsUserInfo(null),localStorage.setItem("token",""),t.$router.push({name:"Login"}));case 18:case"end":return i.stop()}}),i)})))()},getSettings:function(){var e=this;return Object(c["a"])(Object(l["a"])().mark((function t(){var i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.triggerLoading(!0),t.next=3,Object(n["q"])();case 3:i=t.sent,e.show=!0,e.form=Object(r["a"])(Object(r["a"])({},i.data),{},{code:"",believeTrust:i.data.believeTrust.join("\n"),believeAccess:i.data.believeAccess.join("\n")}),e.triggerLoading(!1);case 7:case"end":return t.stop()}}),t)})))()}})},m=v,f=(i("3a4e"),i("3427")),b=Object(f["a"])(m,s,a,!1,null,"a597bbe8",null);t["default"]=b.exports}}]);