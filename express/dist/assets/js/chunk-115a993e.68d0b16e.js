(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-115a993e"],{"0598":function(e,t,i){"use strict";i("bb8f")},"381a":function(e,t,i){"use strict";var s="0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",c="~!@#$%^*()_+-=[]{}|;:,./<>?";function l(e,t){e||(e=8),t||(t={});var i="",l="";!0===t?i=s+a+c:"string"==typeof t?i=t:(!1!==t.numbers&&(i+="string"==typeof t.numbers?t.numbers:s),!1!==t.letters&&(i+="string"==typeof t.letters?t.letters:a),t.specials&&(i+="string"==typeof t.specials?t.specials:c));while(e>0)e--,l+=i[Math.floor(Math.random()*i.length)];return l}e.exports=l.default=l},"9a22":function(e,t,i){"use strict";i.r(t);var s,a,c=i("c7eb"),l=i("1da1"),r=i("5530"),n=(i("4de4"),i("d3b7"),i("ac1f"),i("1276"),i("14d9"),i("a15b"),i("365c")),o=i("381a"),d=i.n(o),v=(i("6912"),i("2f62")),u={name:"settings",render:function(){var e=this,t=arguments[0];return t("div",{directives:[{name:"show",value:this.show}],class:"settings"},[t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["开机"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["开机检测"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.startupTime,callback:function(t){e.$set(e.form,"startupTime",t)}}})]),t("div",["开机多长时间算作刚开机,用于载入数据库黑名单,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["登录"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["登录有效期"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.jwtExpiresIn,callback:function(t){e.$set(e.form,"jwtExpiresIn",t)}}})]),t("div",["登录之后保存登录状态的时长,单位天"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["登录状态验证密钥"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{disabled:!0,placeholder:"请生成密钥"},model:{value:e.form.jwtSecret,callback:function(t){e.$set(e.form,"jwtSecret",t)}}},[t("el-button",{slot:"append",on:{click:function(){return e.generateClick("jwtSecret")}}},["生成"])])]),t("div",["加密登录信息"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["防火墙"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["防火墙检测时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.firewalldInterval,callback:function(t){e.$set(e.form,"firewalldInterval",t)}}})]),t("div",["检测需要加入屏蔽名单 IP 的时间,单位分"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["检测访问间隔时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.firewalldDuration,callback:function(t){e.$set(e.form,"firewalldDuration",t)}}})]),t("div",["检测 IP 访问的时间,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["日志"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["日志间隔"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.accessLogInterval,callback:function(t){e.$set(e.form,"accessLogInterval",t)}}})]),t("div",["IP 访问日志间隔时间,屏蔽名单的 IP 不会生成访问日志,单位秒"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["流量限制"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["接口访问次数"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.ratelimitMax,callback:function(t){e.$set(e.form,"ratelimitMax",t)}}})]),t("div",["接口在单位时间内访问的最大次数"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["接口访问刷新时间"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.ratelimitDuration,callback:function(t){e.$set(e.form,"ratelimitDuration",t)}}})]),t("div",["重置接口刷新访问次数的时间,单位分"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["验证码"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["验证码有效期"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.captchaExpiresIn,callback:function(t){e.$set(e.form,"captchaExpiresIn",t)}}})]),t("div",["验证码有效时间,单位分"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["验证码密钥"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{disabled:!0,placeholder:"请生成密钥"},model:{value:e.form.captchaSecret,callback:function(t){e.$set(e.form,"captchaSecret",t)}}},[t("el-button",{slot:"append",on:{click:function(){return e.generateClick("captchaSecret")}}},["生成"])])]),t("div",["加密验证码信息"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["信任配置"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["部分信任"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"支持 IP 段,多个 IP 换行间隔 示例: \n 192.168.1/255.1 \n 192.168.1.1/255 \n 192.168.1/255.1/255"},model:{value:e.form.believeAccess,callback:function(t){e.$set(e.form,"believeAccess",t)}}})]),t("div",["匹配的 IP 不会被加入黑名单"])])]),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["全部信任"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"不支持 IP 段,多个 IP 换行间隔 示例: \n 192. \n 10. \n 解释:以 192. 或者 10. 开头的 IP 都不会被加入黑名单,以此类推"},model:{value:e.form.believeTrust,callback:function(t){e.$set(e.form,"believeTrust",t)}}})]),t("div",["匹配的 IP 不会被加入黑名单,性能好"])])])])]),t("div",{class:"s-item"},[t("el-card",[t("div",{class:"s-i-title"},["自动清理"]),t("el-divider"),t("div",{class:"s-i-container"},[t("div",{class:"s-i-c-left"},["自动清理"]),t("div",{class:"s-i-c-right"},[t("div",[t("el-input-number",{attrs:{min:1,label:"描述文字"},model:{value:e.form.cleanInterval,callback:function(t){e.$set(e.form,"cleanInterval",t)}}})]),t("div",["自动清理日志和整理数据库,单位天"])])])])]),t("div",{class:"s-i-button"},[t("div",{class:"s-i-b-item"},[t("el-input",{class:"global-captcha-input",attrs:{placeholder:"不区分大小写",clearable:!0,maxlength:4},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)}}},[t("global-captcha",{slot:"append",attrs:{uuid:this.uuid},on:{captcha:function(t){return e.captcha=t}}})])]),t("div",{class:"s-i-b-item"},[t("el-popconfirm",{attrs:{title:"重启后生效,确定吗？"},on:{confirm:function(){return e.setSettings()}}},[t("el-button",{slot:"reference",attrs:{type:"primary"}},["保存"])])]),t("div",{class:"s-i-b-item"},[t("el-popconfirm",{attrs:{title:"将重启确定执行吗？"},on:{confirm:function(){return e.setSettings(!0)}}},[t("el-button",{slot:"reference"},["保存并重启"])])])])])},inject:["triggerLoading"],data:function(){return{show:!1,uuid:d()(),captcha:{svg:"",publicKey:"",captchaSecret:""},form:{code:"",accessLogInterval:"",cleanInterval:"",captchaExpiresIn:"",captchaSecret:"",firewalldDuration:"",firewalldInterval:"",jwtExpiresIn:"",jwtSecret:"",ratelimitDuration:"",ratelimitMax:"",startupTime:"",believeTrust:"",believeAccess:""}}},created:function(){this.getSettings()},methods:Object(r["a"])(Object(r["a"])({},Object(v["c"])(["otherMutationsUserInfo"])),{},{generateClick:function(e){this.form[e]=d()(20)},setSettings:function(){var e=arguments,t=this;return Object(l["a"])(Object(c["a"])().mark((function i(){var s,a,l,o,v,u,f,m;return Object(c["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(l=e.length>0&&void 0!==e[0]&&e[0],""!=t.form.code){i.next=3;break}return i.abrupt("return",t.$message({showClose:!0,message:"请输入验证码",type:"error"}));case 3:return o=null===(s=t.form)||void 0===s?void 0:s.believeTrust,v=null===(a=t.form)||void 0===a?void 0:a.believeAccess,t.triggerLoading(!0),i.next=8,Object(n["v"])(Object(r["a"])(Object(r["a"])({},t.form),{},{codeSecret:t.captcha.captchaSecret,believeAccess:v.split(/\n{1,}/g).filter((function(e){return""!=e})),believeTrust:o.split(/\n{1,}/g).filter((function(e){return""!=e})),restart:l}));case 8:return u=i.sent,f=u.success,m=u.message,u.data,t.triggerLoading(!1),t.uuid=d()(),i.next=16,t.getSettings();case 16:t.$message({showClose:!0,message:f?l?"保存成功,即将重启服务":"保存成功":m,type:f?"success":"error"}),f&&l&&(t.otherMutationsUserInfo(null),localStorage.setItem("token",""),t.$router.push({name:"Login"}));case 18:case"end":return i.stop()}}),i)})))()},getSettings:function(){var e=this;return Object(l["a"])(Object(c["a"])().mark((function t(){var i;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.triggerLoading(!0),t.next=3,Object(n["r"])();case 3:i=t.sent,e.show=!0,e.form=Object(r["a"])(Object(r["a"])({},i.data),{},{code:"",believeTrust:i.data.believeTrust.join("\n"),believeAccess:i.data.believeAccess.join("\n")}),e.triggerLoading(!1);case 7:case"end":return t.stop()}}),t)})))()}}),beforeDestroy:function(){this.triggerLoading(!1)}},f=u,m=(i("0598"),i("2877")),b=Object(m["a"])(f,s,a,!1,null,"10abd175",null);t["default"]=b.exports},bb8f:function(e,t,i){}}]);