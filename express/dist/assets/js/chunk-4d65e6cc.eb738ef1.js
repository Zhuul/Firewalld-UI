(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d65e6cc"],{"20a3":function(e,r,t){"use strict";t.r(r);var c,s,a=t("0e92"),n=t("8f61"),o=t("2178"),i=t("5825"),l=t.n(i),u=(t("d61a"),t("376b"),t("1752"),t("ebe5"),t("6416"),t("839f"),t("365c")),d=t("6912"),p=t("74bf"),f={name:"register-dialog",props:{visible:{type:Boolean,default:!1}},render:function(){var e=this,r=arguments[0];return r("el-dialog",{class:"login-register-dialog",attrs:{visible:this.visible,width:"25%","show-close":!1,placement:"bottom",center:!0},on:{close:function(){return e.cancelClick()},open:function(){return e.open()}}},[r("div",{slot:"title"},["注册用户"]),r("el-form",l()([{},{props:{model:this.form}},{attrs:{rules:this.rules,"label-position":"top"},ref:"registerForm"}]),[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{ref:"register-username",attrs:{clearable:!0,disabled:this.loading,type:"text",placeholder:"用户名"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)}}},[r("i",{slot:"prepend",class:"el-icon-s-custom"})])]),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{clearable:!0,"show-password":!0,disabled:this.loading,type:"password",placeholder:"密码"},ref:"register-password",model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)}}},[r("i",{slot:"prepend",class:"el-icon-lock"})])]),r("el-form-item",{attrs:{prop:"secret"}},[r("el-input",{attrs:{disabled:!0,clearable:!0,type:"text",placeholder:"自定义口令,用于修改密码"},ref:"register-secret",model:{value:e.form.secret,callback:function(r){e.$set(e.form,"secret",r)}}},[r("i",{slot:"prepend",class:"el-icon-chat-line-square"}),r("el-button",{attrs:{disabled:this.loading},slot:"append",on:{click:function(){return e.generateClick()}}},["生成"])])]),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{placeholder:"不区分大小写",clearable:!0},ref:"register-code",model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)}}},[r("div",{slot:"append",on:{click:function(){return e.uuid=p()}}},[r("global-captcha",{attrs:{uuid:this.uuid},on:{captcha:function(r){return e.captcha=r}}})])])])]),r("div",{slot:"footer",class:"dialog-footer"},[r("el-button",{on:{click:function(){return e.cancelClick()}}},["取 消"]),r("el-button",{attrs:{type:"primary"},on:{click:function(){return e.confirmClick()}}},["确 定"])])])},data:function(){return{form:{username:"",password:"",secret:"",code:"",secretCode:""},uuid:p(),captcha:{svg:"",publicKey:"",captchaSecret:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:4,max:10,message:"长度在 4 到 10 个字符",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{validator:function(e,r,t){/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/.test(r)?t():t(new Error("最少6位,至少分别1个大小写字母和数字,!@#$%^&*?其中一个"))},trigger:"change"}],secret:[{required:!0,message:"请生成自定义口令",trigger:"change"},{validator:function(e,r,t){/^[\d\w]+$/.test(r)?t():t(new Error("注册口令只能是数字或者字母"))},trigger:"change"}],code:[{required:!0,message:"请输入验证码",trigger:"change"},{validator:function(e,r,t){/^[\d]{1,2}$/.test(r)?t():t(new Error("验证码至多2个数字"))},trigger:"change"}]},loading:!1,autofocus:!1}},methods:{open:function(){this.uuid=p()},cancelClick:function(){this.$emit("cancel")},confirmClick:function(){var e=this;return Object(o["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$refs.registerForm.validate(function(){var r=Object(o["a"])(Object(a["a"])().mark((function r(t,c){var s,o,i,l,d;return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if((null===(s=Object.keys(c))||void 0===s?void 0:s[0])&&e.$refs["register-".concat(Object.keys(c)[0])].focus(),!t){r.next=21;break}return e.loading=!0,e.form=Object(n["a"])(Object(n["a"])({},e.form),{},{captchaSecret:e.captcha.captchaSecret}),r.next=6,Object(u["C"])(e.form);case 6:if(o=r.sent,i=o.success,l=o.message,e.$message({showClose:!0,message:i?"注册成功":l,type:i?"success":"error"}),i||(e.uuid=p()),d=["验证码错误","验证码已被使用","验证码过期"],d.includes(l)&&e.$refs["register-code"].focus(),e.loading=!1,0!=i){r.next=16;break}return r.abrupt("return");case 16:e.form={username:"",password:"",secret:"",code:""},e.$refs.registerForm.resetFields(),e.$emit("confirm"),r.next=22;break;case 21:return r.abrupt("return",!1);case 22:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()},generateClick:function(){this.form.secret=p(20),Object(d["a"])(this.form.secret)}}},m=f,g=(t("20ed"),t("3427")),h=Object(g["a"])(m,c,s,!1,null,"50c85a12",null);r["default"]=h.exports},"20ed":function(e,r,t){"use strict";t("454c")},"454c":function(e,r,t){}}]);