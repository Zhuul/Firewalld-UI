(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9845dbf4"],{"2d90":function(e,t,r){"use strict";r("81da")},"81da":function(e,t,r){},c377:function(e,t,r){"use strict";r.r(t);var a,s,c=r("c7eb"),o=r("5530"),n=r("1da1"),i=r("2638"),l=r.n(i),d=(r("ac1f"),r("00b4"),r("d9e2"),r("b64b"),r("caad"),r("2532"),r("365c")),u=(r("6912"),r("381a")),p={name:"update-pass-dialog",props:{visible:{type:Boolean,default:!1}},render:function(){var e=this,t=arguments[0];return t("el-dialog",{class:"login-update-password-dialog",attrs:{visible:this.visible,width:"30%",top:"8vh","show-close":!1,center:!0},on:{open:function(){return e.open()},close:function(){return e.close()}}},[t("div",{slot:"title"},["修改密码"]),t("el-form",l()([{},{props:{model:this.form}},{attrs:{rules:this.rules,"label-position":"top"},ref:"updateForm"}]),[t("el-form-item",{attrs:{prop:"username",label:"用户名"}},[t("el-input",{attrs:{clearable:!0,disabled:this.loading,type:"text",placeholder:"用户名"},ref:"update-username",model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)}}},[t("i",{slot:"prepend",class:"el-icon-s-custom"})])]),t("el-form-item",{attrs:{prop:"password",label:"密码"}},[t("el-input",{attrs:{clearable:!0,"show-password":!0,disabled:this.loading,type:"password",placeholder:"新密码",label:"新密码"},ref:"update-password",model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)}}},[t("i",{slot:"prepend",class:"el-icon-lock"})])]),t("el-form-item",{attrs:{prop:"jwtSecret",label:"JWT 密钥"}},[t("el-input",{attrs:{clearable:!0,"show-password":!0,disabled:this.loading,type:"password",placeholder:"当前服务器 JWT 密钥"},ref:"update-jwtSecret",model:{value:e.form.jwtSecret,callback:function(t){e.$set(e.form,"jwtSecret",t)}}},[t("i",{slot:"prepend",class:"el-icon-unlock"})])]),t("el-form-item",{attrs:{prop:"secret",label:"口令"}},[t("el-input",{attrs:{clearable:!0,"show-password":!0,disabled:this.loading,type:"password",placeholder:"注册时口令"},ref:"update-secret",model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)}}},[t("i",{slot:"prepend",class:"el-icon-chat-line-square"})])]),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{placeholder:"不区分大小写",clearable:!0,disabled:this.loading},ref:"update-code",model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)}}},[t("div",{slot:"append",on:{click:function(){return e.uuid=u()}}},[t("global-captcha",{attrs:{uuid:this.uuid,disabled:this.loading},on:{captcha:function(t){return e.captcha=t}}})])])])]),t("div",{slot:"footer",class:"dialog-footer"},[t("el-button",{attrs:{disabled:this.loading},on:{click:function(){return e.cancelClick()}}},["取 消"]),t("el-button",{attrs:{type:"primary",loading:this.loading},on:{click:function(){return e.confirmClick()}}},["确 定"])])])},data:function(){return{form:{username:"",password:"",secret:"",jwtSecret:"",code:"",captchaSecret:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:4,max:10,message:"长度在 4 到 10 个字符",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{validator:function(e,t,r){/^\S*(?=\S{8,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/.test(t)?r():r(new Error("最少8位和分别1个大小写字母数字,!@#$%^&*?其中一个"))},trigger:"change"}],jwtSecret:[{required:!0,message:"请输入 JWT 密钥",trigger:"change"},{validator:function(e,t,r){/^[\d\w]+$/.test(t)?r():r(new Error("JWT 密钥只能是数字或者字母"))},trigger:"change"}],secret:[{required:!0,message:"请输入注册口令",trigger:"change"},{validator:function(e,t,r){/^[\d\w]+$/.test(t)?r():r(new Error("注册口令只能是数字或者字母"))},trigger:"change"}],code:[{required:!0,message:"请输入验证码",trigger:"change"},{validator:function(e,t,r){/^[\d]{1,2}$/.test(t)?r():r(new Error("验证码至多2个数字"))},trigger:"change"}]},uuid:u(),captcha:{svg:"",publicKey:"",captchaSecret:""},loading:!1,autofocus:!1}},methods:{open:function(){this.uuid=u()},close:function(){this.loading=!1,this.$emit("close")},cancelClick:function(){this.$emit("cancel")},confirmClick:function(){var e=this;return Object(n["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:e.$refs.updateForm.validate(function(){var t=Object(n["a"])(Object(c["a"])().mark((function t(r,a){var s,n,i,l,p;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((null===(s=Object.keys(a))||void 0===s?void 0:s[0])&&e.$refs["update-".concat(Object.keys(a)[0])].focus(),!r){t.next=21;break}return e.loading=!0,e.form=Object(o["a"])(Object(o["a"])({},e.form),{},{captchaSecret:e.captcha.captchaSecret}),t.next=6,Object(d["w"])(e.form);case 6:if(n=t.sent,i=n.success,l=n.message,e.$message({showClose:!0,message:i?"修改成功":l,type:i?"success":"error"}),i||(e.uuid=u()),e.loading=!1,p=["验证码错误","验证码已被使用","验证码过期"],p.includes(l)&&e.$refs["update-code"].focus(),0!=i){t.next=16;break}return t.abrupt("return");case 16:e.form={username:"",password:"",secret:"",captchaSecret:"",jwtSecret:"",code:""},e.$refs.updateForm.resetFields(),e.$emit("confirm"),t.next=22;break;case 21:return t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()}}},f=p,m=(r("2d90"),r("2877")),g=Object(m["a"])(f,a,s,!1,null,"6f6bd9f0",null);t["default"]=g.exports}}]);